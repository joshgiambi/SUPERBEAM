2025-10-24 21:53:25,691 - __main__ - INFO - Loading SegVol model...
2025-10-24 21:53:25,692 - __main__ - INFO - Initializing SegVol on device: cpu
2025-10-24 21:53:28,136 - __main__ - INFO - Building SegVol model architecture...
2025-10-24 21:53:29,092 - __main__ - INFO - Using locally cached SegVol weights: /Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/weights/models--BAAI--SegVol/snapshots/516701d5bef430604a13f5db7ce896149d075663/pytorch_model.bin
2025-10-24 21:53:29,092 - __main__ - INFO - Loading weights from /Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/weights/models--BAAI--SegVol/snapshots/516701d5bef430604a13f5db7ce896149d075663/pytorch_model.bin
2025-10-24 21:53:29,260 - __main__ - INFO - SegVol model loaded successfully
2025-10-24 21:53:29,261 - __main__ - INFO - SegVol model loaded and ready
2025-10-24 21:53:29,261 - __main__ - INFO - Starting SegVol service on 127.0.0.1:5002
build_sam_vit_3d...
 * Serving Flask app 'segvol_service'
 * Debug mode: off
2025-10-24 21:53:29,264 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5002
2025-10-24 21:53:29,264 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-24 21:53:43,582 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:53:43] "GET /health HTTP/1.1" 200 -
2025-10-24 21:56:16,637 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=390.1, target_pos=404.1, distance=14.0mm, contour_points=104, volume_slices=36
2025-10-24 21:56:16,637 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:16,637 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1876.0], mean: -898.2
2025-10-24 21:56:16,638 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1831.0], mean: -893.6
2025-10-24 21:56:16,657 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:16,663 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 104
2025-10-24 21:56:16,663 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:16,663 - __main__ - INFO - ðŸ“Š Using 36 real DICOM slices to build volume
2025-10-24 21:56:22,562 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=382.1, target_pos=182.1, distance=200.0mm, contour_points=8, volume_slices=200
2025-10-24 21:56:22,565 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:22,565 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1882.0], mean: -902.0
2025-10-24 21:56:22,566 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 2631.0], mean: -664.0
2025-10-24 21:56:22,577 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:22,577 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 8
2025-10-24 21:56:22,577 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:22,577 - __main__ - INFO - ðŸ“Š Using 200 real DICOM slices to build volume
2025-10-24 21:56:25,960 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=414.1, target_pos=182.1, distance=232.0mm, contour_points=114, volume_slices=200
2025-10-24 21:56:25,960 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:25,961 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1829.0], mean: -891.3
2025-10-24 21:56:25,961 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 2631.0], mean: -664.0
2025-10-24 21:56:25,969 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:25,969 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 114
2025-10-24 21:56:25,969 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:25,969 - __main__ - INFO - ðŸ“Š Using 200 real DICOM slices to build volume
2025-10-24 21:56:32,681 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 12, target at 19
2025-10-24 21:56:32,682 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:56:32,682 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 12/32, mask has 113 pixels
2025-10-24 21:56:32,683 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[148,158], y=[111,126], z=[12,12]
2025-10-24 21:56:32,683 - __main__ - INFO - ðŸ“Š Box size: 10x15x0 pixels (2D: 10x15)
2025-10-24 21:56:33,394 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.152, 0.205]
2025-10-24 21:56:33,394 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:56:33,394 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:56:33,394 - __main__ - INFO - ðŸ“Š Reference position: 390.1, Target position: 404.1, Distance: 14.0
2025-10-24 21:56:33,394 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.551
2025-10-24 21:56:33,395 - __main__ - INFO - Using fixed threshold 0.500 (max=0.551)
2025-10-24 21:56:33,395 - __main__ - INFO - Binary mask: 41890 pixels above threshold 0.500
2025-10-24 21:56:35,180 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=41890, contour_points=383
2025-10-24 21:56:35,180 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 383, sample: [[0.0, 113.5], [1.0, 113.5]]
2025-10-24 21:56:35,180 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 383 points, sample: [[0.0, 227.0], [2.0, 227.0]]
2025-10-24 21:56:35,180 - __main__ - WARNING - Prediction rejected: mask 370.7x larger than reference (41890 vs 113)
2025-10-24 21:56:35,278 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:56:35] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:56:37,289 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 100, target at 0
2025-10-24 21:56:37,291 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:56:37,291 - __main__ - ERROR - SegVol inference failed: index 100 is out of bounds for axis 0 with size 32
Traceback (most recent call last):
  File "/Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/segvol_service.py", line 499, in _run_segvol_inference
    def _run_segvol_inference(
                             ^
IndexError: index 100 is out of bounds for axis 0 with size 32
2025-10-24 21:56:37,294 - __main__ - WARNING - Falling back to simple mask propagation
2025-10-24 21:56:37,294 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:56:37,294 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:56:37,294 - __main__ - INFO - ðŸ“Š Reference position: 382.1, Target position: 182.1, Distance: 200.0
2025-10-24 21:56:37,294 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.000
2025-10-24 21:56:37,294 - __main__ - INFO - Using fixed threshold 0.500 (max=0.000)
2025-10-24 21:56:37,294 - __main__ - INFO - Binary mask: 0 pixels above threshold 0.500
2025-10-24 21:56:37,294 - __main__ - WARNING - No contours found with threshold 0.500, max mask value: 0.000, mask pixels: 0
2025-10-24 21:56:37,294 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 0, sample: []
2025-10-24 21:56:37,294 - __main__ - WARNING - Prediction rejected: empty mask
2025-10-24 21:56:37,764 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:56:37] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:56:38,066 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 116, target at 0
2025-10-24 21:56:38,066 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:56:38,066 - __main__ - ERROR - SegVol inference failed: index 116 is out of bounds for axis 0 with size 32
Traceback (most recent call last):
  File "/Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/segvol_service.py", line 499, in _run_segvol_inference
    def _run_segvol_inference(
                             ^
IndexError: index 116 is out of bounds for axis 0 with size 32
2025-10-24 21:56:38,066 - __main__ - WARNING - Falling back to simple mask propagation
2025-10-24 21:56:38,066 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:56:38,066 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:56:38,066 - __main__ - INFO - ðŸ“Š Reference position: 414.1, Target position: 182.1, Distance: 232.0
2025-10-24 21:56:38,066 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.000
2025-10-24 21:56:38,066 - __main__ - INFO - Using fixed threshold 0.500 (max=0.000)
2025-10-24 21:56:38,066 - __main__ - INFO - Binary mask: 0 pixels above threshold 0.500
2025-10-24 21:56:38,067 - __main__ - WARNING - No contours found with threshold 0.500, max mask value: 0.000, mask pixels: 0
2025-10-24 21:56:38,067 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 0, sample: []
2025-10-24 21:56:38,067 - __main__ - WARNING - Prediction rejected: empty mask
2025-10-24 21:56:38,814 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:56:38] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:56:42,910 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=382.1, target_pos=182.1, distance=200.0mm, contour_points=8, volume_slices=200
2025-10-24 21:56:42,911 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:42,911 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1882.0], mean: -902.0
2025-10-24 21:56:42,912 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 2631.0], mean: -664.0
2025-10-24 21:56:46,569 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=382.1, target_pos=182.1, distance=200.0mm, contour_points=8, volume_slices=200
2025-10-24 21:56:46,570 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:46,570 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1882.0], mean: -902.0
2025-10-24 21:56:46,570 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 2631.0], mean: -664.0
2025-10-24 21:56:46,573 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:46,574 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 8
2025-10-24 21:56:46,574 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:46,574 - __main__ - INFO - ðŸ“Š Using 200 real DICOM slices to build volume
2025-10-24 21:56:46,578 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:46,579 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 8
2025-10-24 21:56:46,579 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:46,579 - __main__ - INFO - ðŸ“Š Using 200 real DICOM slices to build volume
2025-10-24 21:56:52,884 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=382.1, target_pos=184.1, distance=198.0mm, contour_points=8, volume_slices=200
2025-10-24 21:56:52,887 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:52,888 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:56:52] "GET /health HTTP/1.1" 200 -
2025-10-24 21:56:52,889 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1882.0], mean: -902.0
2025-10-24 21:56:52,889 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 2847.0], mean: -665.1
2025-10-24 21:56:52,900 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:52,900 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 8
2025-10-24 21:56:52,900 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:52,900 - __main__ - INFO - ðŸ“Š Using 200 real DICOM slices to build volume
2025-10-24 21:56:58,472 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=382.1, target_pos=184.1, distance=198.0mm, contour_points=8, volume_slices=200
2025-10-24 21:56:58,473 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:56:58,474 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1882.0], mean: -902.0
2025-10-24 21:56:58,475 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 2847.0], mean: -665.1
2025-10-24 21:56:58,487 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:56:58,487 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 8
2025-10-24 21:56:58,487 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:56:58,487 - __main__ - INFO - ðŸ“Š Using 200 real DICOM slices to build volume
2025-10-24 21:57:07,094 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 100, target at 0
2025-10-24 21:57:07,094 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:07,094 - __main__ - ERROR - SegVol inference failed: index 100 is out of bounds for axis 0 with size 32
Traceback (most recent call last):
  File "/Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/segvol_service.py", line 499, in _run_segvol_inference
    def _run_segvol_inference(
                             ^
IndexError: index 100 is out of bounds for axis 0 with size 32
2025-10-24 21:57:07,095 - __main__ - WARNING - Falling back to simple mask propagation
2025-10-24 21:57:07,095 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:07,095 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:07,095 - __main__ - INFO - ðŸ“Š Reference position: 382.1, Target position: 182.1, Distance: 200.0
2025-10-24 21:57:07,095 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.000
2025-10-24 21:57:07,095 - __main__ - INFO - Using fixed threshold 0.500 (max=0.000)
2025-10-24 21:57:07,095 - __main__ - INFO - Binary mask: 0 pixels above threshold 0.500
2025-10-24 21:57:07,095 - __main__ - WARNING - No contours found with threshold 0.500, max mask value: 0.000, mask pixels: 0
2025-10-24 21:57:07,095 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 0, sample: []
2025-10-24 21:57:07,095 - __main__ - WARNING - Prediction rejected: empty mask
2025-10-24 21:57:07,593 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:07] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:07,895 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 100, target at 0
2025-10-24 21:57:07,895 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:07,895 - __main__ - ERROR - SegVol inference failed: index 100 is out of bounds for axis 0 with size 32
Traceback (most recent call last):
  File "/Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/segvol_service.py", line 499, in _run_segvol_inference
    def _run_segvol_inference(
                             ^
IndexError: index 100 is out of bounds for axis 0 with size 32
2025-10-24 21:57:07,895 - __main__ - WARNING - Falling back to simple mask propagation
2025-10-24 21:57:07,895 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:07,895 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:07,895 - __main__ - INFO - ðŸ“Š Reference position: 382.1, Target position: 182.1, Distance: 200.0
2025-10-24 21:57:07,896 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.000
2025-10-24 21:57:07,896 - __main__ - INFO - Using fixed threshold 0.500 (max=0.000)
2025-10-24 21:57:07,896 - __main__ - INFO - Binary mask: 0 pixels above threshold 0.500
2025-10-24 21:57:07,896 - __main__ - WARNING - No contours found with threshold 0.500, max mask value: 0.000, mask pixels: 0
2025-10-24 21:57:07,896 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 0, sample: []
2025-10-24 21:57:07,896 - __main__ - WARNING - Prediction rejected: empty mask
2025-10-24 21:57:08,387 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:08] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 99, target at 0
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:09,896 - __main__ - ERROR - SegVol inference failed: index 99 is out of bounds for axis 0 with size 32
Traceback (most recent call last):
  File "/Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/segvol_service.py", line 499, in _run_segvol_inference
    def _run_segvol_inference(
                             ^
IndexError: index 99 is out of bounds for axis 0 with size 32
2025-10-24 21:57:09,896 - __main__ - WARNING - Falling back to simple mask propagation
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Reference position: 382.1, Target position: 184.1, Distance: 198.0
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.000
2025-10-24 21:57:09,896 - __main__ - INFO - Using fixed threshold 0.500 (max=0.000)
2025-10-24 21:57:09,896 - __main__ - INFO - Binary mask: 0 pixels above threshold 0.500
2025-10-24 21:57:09,896 - __main__ - WARNING - No contours found with threshold 0.500, max mask value: 0.000, mask pixels: 0
2025-10-24 21:57:09,896 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 0, sample: []
2025-10-24 21:57:09,897 - __main__ - WARNING - Prediction rejected: empty mask
2025-10-24 21:57:10,382 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:10] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:10,454 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:10] "GET /health HTTP/1.1" 200 -
2025-10-24 21:57:11,283 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 99, target at 0
2025-10-24 21:57:11,284 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:11,284 - __main__ - ERROR - SegVol inference failed: index 99 is out of bounds for axis 0 with size 32
Traceback (most recent call last):
  File "/Users/joshua/Documents/CONVERGE_REPLIT_VIEWER/server/segvol/segvol_service.py", line 499, in _run_segvol_inference
    def _run_segvol_inference(
                             ^
IndexError: index 99 is out of bounds for axis 0 with size 32
2025-10-24 21:57:11,284 - __main__ - WARNING - Falling back to simple mask propagation
2025-10-24 21:57:11,284 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:11,284 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:11,284 - __main__ - INFO - ðŸ“Š Reference position: 382.1, Target position: 184.1, Distance: 198.0
2025-10-24 21:57:11,284 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.000
2025-10-24 21:57:11,284 - __main__ - INFO - Using fixed threshold 0.500 (max=0.000)
2025-10-24 21:57:11,284 - __main__ - INFO - Binary mask: 0 pixels above threshold 0.500
2025-10-24 21:57:11,284 - __main__ - WARNING - No contours found with threshold 0.500, max mask value: 0.000, mask pixels: 0
2025-10-24 21:57:11,284 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 0, sample: []
2025-10-24 21:57:11,284 - __main__ - WARNING - Prediction rejected: empty mask
2025-10-24 21:57:11,707 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:11] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:14,214 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:14,215 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:14,215 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:14,216 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:14,248 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:14,248 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:14,249 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:14,249 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:14,275 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:14,275 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:14,275 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:14,275 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:14,278 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:14,279 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:14,279 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:14,279 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:14,285 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:14,287 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:14,287 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:14,288 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:14,288 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:14,289 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:14,289 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:14,290 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:14,290 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:14,290 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:14,290 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:14,290 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:14,291 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:15,447 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:15,477 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:15,477 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:15,477 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:15,478 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:15,478 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:15,478 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:15,478 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:15,478 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:15,478 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:15,478 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:15,484 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:15,488 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:15,488 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:15,488 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:15,488 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:15,489 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:15,489 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:15,489 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:15,497 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:15] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:15,497 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:15,502 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:15,502 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:15,502 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:15,502 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:15,502 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:15,502 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:15,502 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:15,507 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:15] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:15,511 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:15] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:15,513 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:15,513 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:15,513 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:15,513 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:15,515 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:15,515 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:15,515 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:15,515 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:16,030 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:16,030 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:16,031 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:16,031 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:16,038 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:16,038 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:16,038 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:16,038 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:16,039 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:16,039 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:16,040 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:16,040 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:16,094 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=334.1, target_pos=330.1, distance=4.0mm, contour_points=26
2025-10-24 21:57:16,094 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:16,095 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1321.0], mean: -847.8
2025-10-24 21:57:16,096 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:16,103 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:16,103 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:16,103 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 26
2025-10-24 21:57:16,103 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:16,103 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:16,104 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:16,104 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:16,104 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:16,104 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:16,104 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:16,104 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:16,111 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:16,112 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:16,112 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:16,112 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:16,114 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:16] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:16,115 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:16,115 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 10 pixels
2025-10-24 21:57:16,116 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[122,125], z=[0,27]
2025-10-24 21:57:16,116 - __main__ - INFO - ðŸ“Š Box size: 3x3x27 pixels (2D: 3x3)
2025-10-24 21:57:16,510 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:16,511 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:16,511 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:16,511 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:16,518 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:16,518 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:16,518 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:16,518 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:16,519 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:16,520 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:16,520 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:16,520 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:16,578 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:16,578 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:16,580 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:16,581 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:16,594 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:16,594 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:16,594 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:16,594 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:16,595 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:16,595 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:16,596 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:16,596 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:17,017 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:17,018 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:17,018 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:17,018 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:17,018 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:17,018 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:17,018 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:17,026 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:17,026 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:17,026 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:17,027 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:17,030 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:17] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:17,129 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:17,129 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:17,131 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:17,132 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:17,139 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.190]
2025-10-24 21:57:17,140 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:17,140 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:17,140 - __main__ - INFO - ðŸ“Š Reference position: 334.1, Target position: 330.1, Distance: 4.0
2025-10-24 21:57:17,140 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.536
2025-10-24 21:57:17,140 - __main__ - INFO - Using fixed threshold 0.500 (max=0.536)
2025-10-24 21:57:17,140 - __main__ - INFO - Binary mask: 56084 pixels above threshold 0.500
2025-10-24 21:57:17,146 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56084, contour_points=45
2025-10-24 21:57:17,146 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[66.5, 161.0], [66.5, 160.0]]
2025-10-24 21:57:17,146 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[133.0, 322.0], [133.0, 320.0]]
2025-10-24 21:57:17,147 - __main__ - WARNING - Prediction rejected: mask 5608.4x larger than reference (56084 vs 10)
2025-10-24 21:57:17,150 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:17] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:17,152 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:17,152 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:17,152 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:17,152 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:17,153 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:17,153 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:17,154 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:17,154 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:17,198 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:17,198 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:17,199 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:17,200 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:17,207 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:17,207 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:17,207 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:17,207 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:17,209 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:17,209 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:17,210 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:17,210 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:17,755 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:17,756 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:17,756 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:17,756 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:17,756 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:17,756 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:17,756 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:17,762 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:17,762 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:17,762 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:17,763 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:17,765 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:17] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:17,783 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:17,783 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:17,783 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:17,783 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:17,784 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:17,784 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:17,784 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:17,788 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:17,788 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:17,788 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:17,788 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:17,793 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:17] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:18,099 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:18,100 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:18,100 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:18,100 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:18,100 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:18,100 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:18,100 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:18,107 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:18,107 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:18,107 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:18,107 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:18,110 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:18] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:18,122 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:18,122 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:18,122 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:18,122 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:18,123 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:18,123 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:18,123 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:18,126 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:18,126 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:18,126 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:18,127 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:18,129 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:18] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:30,745 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:30,745 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:30,746 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:30,746 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:30,752 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:30,752 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:30,752 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:30,752 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:30,753 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:30,754 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:30,754 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:30,754 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:30,793 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:30,793 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:30,793 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:30,794 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:30,800 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:30,800 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:30,800 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:30,800 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:30,802 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:30,802 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:30,802 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:30,802 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:31,469 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:31,469 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:31,469 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:31,469 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:31,469 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:31,469 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:31,469 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:31,475 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:31,475 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:31,475 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:31,475 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:31,477 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:31] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:31,494 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:31,494 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:31,494 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:31,494 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:31,494 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:31,494 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:31,494 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:31,498 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:31,498 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:31,498 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:31,498 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:31,505 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:31] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:36,058 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:36,058 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:36,058 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:36,059 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:36,065 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:36,065 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:36,065 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:36,065 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:36,067 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:36,067 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:36,067 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:36,067 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:36,107 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:36,107 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:36,107 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:36,107 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:36,117 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:36,117 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:36,117 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:36,117 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:36,119 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:36,119 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:36,119 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:36,120 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:36,777 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:36,778 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:36,778 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:36,778 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:36,778 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:36,778 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:36,778 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:36,784 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:36,784 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:36,784 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:36,784 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:36,786 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:36] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:36,805 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:36,806 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:36,806 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:36,806 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:36,806 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:36,806 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:36,806 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:36,810 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:36,810 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:36,810 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:36,810 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:36,816 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:36] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:37,320 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:37,320 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:37,321 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:37,321 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:37,327 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:37,327 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:37,327 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:37,327 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:37,329 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:37,329 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:37,330 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:37,330 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:37,376 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:37,377 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:37,377 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:37,378 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:37,385 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:37,385 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:37,385 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:37,385 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:37,387 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:37,387 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:37,388 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:37,388 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:38,058 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:38,058 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:38,058 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:38,058 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:38,058 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:38,058 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:38,058 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:38,064 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:38,064 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:38,064 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:38,064 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:38,066 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:38] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:38,077 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:38,077 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:38,077 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:38,077 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:38,077 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:38,077 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:38,077 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:38,081 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:38,081 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:38,081 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:38,081 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:38,089 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:38] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:38,632 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=326.1, distance=6.0mm, contour_points=24
2025-10-24 21:57:38,632 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:38,633 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:38,633 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1435.0], mean: -839.0
2025-10-24 21:57:38,663 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=324.1, distance=8.0mm, contour_points=24
2025-10-24 21:57:38,663 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:38,664 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:38,664 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1370.0], mean: -832.1
2025-10-24 21:57:38,665 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:38,665 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:38,665 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:38,665 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:38,666 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:38,666 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:38,667 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:38,667 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:38,671 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:38,671 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:38,671 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:38,671 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:38,672 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:38,672 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:38,673 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:38,673 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:38,746 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=324.1, distance=8.0mm, contour_points=24
2025-10-24 21:57:38,746 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:38,749 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:38,749 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1370.0], mean: -832.1
2025-10-24 21:57:38,757 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:38,757 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:38,757 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:38,757 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:38,759 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:38,759 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:38,760 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:38,760 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:38,800 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=324.1, distance=8.0mm, contour_points=24
2025-10-24 21:57:38,801 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:38,801 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:38,802 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1370.0], mean: -832.1
2025-10-24 21:57:38,811 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:38,811 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:38,811 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:38,811 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:38,813 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:38,813 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:38,814 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:38,814 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:38,888 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=322.1, distance=10.0mm, contour_points=24
2025-10-24 21:57:38,888 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:38,889 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:38,890 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1165.0], mean: -825.5
2025-10-24 21:57:38,896 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:38,897 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:38,897 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:38,897 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:38,898 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:38,898 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:38,899 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:38,899 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:38,948 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=322.1, distance=10.0mm, contour_points=24
2025-10-24 21:57:38,948 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:38,948 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:38,949 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1165.0], mean: -825.5
2025-10-24 21:57:38,956 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:38,956 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:38,956 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:38,956 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:38,958 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:38,958 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:38,959 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:38,959 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:40,270 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.197]
2025-10-24 21:57:40,271 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:40,272 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:40,272 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 324.1, Distance: 8.0
2025-10-24 21:57:40,272 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:40,272 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:40,272 - __main__ - INFO - Binary mask: 55722 pixels above threshold 0.500
2025-10-24 21:57:40,289 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55722, contour_points=45
2025-10-24 21:57:40,289 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[50.5, 144.0], [51.0, 143.5]]
2025-10-24 21:57:40,289 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[101.0, 288.0], [102.0, 287.0]]
2025-10-24 21:57:40,289 - __main__ - WARNING - Prediction rejected: mask 6965.2x larger than reference (55722 vs 8)
2025-10-24 21:57:40,293 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:40] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:40,341 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=324.1, distance=8.0mm, contour_points=24
2025-10-24 21:57:40,341 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:40,342 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.196]
2025-10-24 21:57:40,342 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:40,343 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1370.0], mean: -832.1
2025-10-24 21:57:40,343 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:40,343 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:40,343 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 326.1, Distance: 6.0
2025-10-24 21:57:40,344 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:40,344 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:40,344 - __main__ - INFO - Binary mask: 55674 pixels above threshold 0.500
2025-10-24 21:57:40,350 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.197]
2025-10-24 21:57:40,350 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55674, contour_points=43
2025-10-24 21:57:40,351 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[66.5, 160.0], [66.5, 159.0]]
2025-10-24 21:57:40,351 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[133.0, 320.0], [133.0, 318.0]]
2025-10-24 21:57:40,352 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:40,352 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:40,352 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 324.1, Distance: 8.0
2025-10-24 21:57:40,352 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:40,352 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:40,353 - __main__ - WARNING - Prediction rejected: mask 6959.2x larger than reference (55674 vs 8)
2025-10-24 21:57:40,353 - __main__ - INFO - Binary mask: 55722 pixels above threshold 0.500
2025-10-24 21:57:40,355 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:40] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:40,360 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55722, contour_points=45
2025-10-24 21:57:40,360 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[50.5, 144.0], [51.0, 143.5]]
2025-10-24 21:57:40,360 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[101.0, 288.0], [102.0, 287.0]]
2025-10-24 21:57:40,361 - __main__ - WARNING - Prediction rejected: mask 6965.2x larger than reference (55722 vs 8)
2025-10-24 21:57:40,364 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:40] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:40,366 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:40,366 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:40,366 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:40,366 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:40,370 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:40,370 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:40,371 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:40,371 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:40,412 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=326.1, distance=6.0mm, contour_points=24
2025-10-24 21:57:40,412 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:40,415 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:40,418 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1435.0], mean: -839.0
2025-10-24 21:57:40,449 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=328.1, distance=4.0mm, contour_points=24
2025-10-24 21:57:40,449 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:40,449 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:40,450 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1579.0], mean: -845.0
2025-10-24 21:57:40,452 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.197]
2025-10-24 21:57:40,453 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:40,453 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:40,453 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 324.1, Distance: 8.0
2025-10-24 21:57:40,453 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:40,453 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:40,454 - __main__ - INFO - Binary mask: 55722 pixels above threshold 0.500
2025-10-24 21:57:40,461 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55722, contour_points=45
2025-10-24 21:57:40,461 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[50.5, 144.0], [51.0, 143.5]]
2025-10-24 21:57:40,461 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[101.0, 288.0], [102.0, 287.0]]
2025-10-24 21:57:40,462 - __main__ - WARNING - Prediction rejected: mask 6965.2x larger than reference (55722 vs 8)
2025-10-24 21:57:40,464 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:40] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:40,464 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:40,465 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:40,465 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:40,465 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:40,467 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:40,467 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:40,467 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:40,468 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:40,471 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:40,471 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:40,471 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:40,471 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:40,471 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:40,472 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:40,472 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:40,472 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:40,509 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=332.1, target_pos=330.1, distance=2.0mm, contour_points=24
2025-10-24 21:57:40,509 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:40,509 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1529.0], mean: -848.0
2025-10-24 21:57:40,509 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1575.0], mean: -849.1
2025-10-24 21:57:40,517 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:40,517 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 24
2025-10-24 21:57:40,517 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:40,517 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:57:40,519 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:40,519 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:57:40,520 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,142], y=[123,125], z=[0,27]
2025-10-24 21:57:40,520 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:57:40,574 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.197]
2025-10-24 21:57:40,574 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:40,575 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:40,575 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 322.1, Distance: 10.0
2025-10-24 21:57:40,575 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:40,575 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:40,575 - __main__ - INFO - Binary mask: 55668 pixels above threshold 0.500
2025-10-24 21:57:40,589 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55668, contour_points=43
2025-10-24 21:57:40,589 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[129.5, 128.0], [130.0, 127.5]]
2025-10-24 21:57:40,589 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[259.0, 256.0], [260.0, 255.0]]
2025-10-24 21:57:40,589 - __main__ - WARNING - Prediction rejected: mask 6958.5x larger than reference (55668 vs 8)
2025-10-24 21:57:40,597 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:40] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:40,616 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.197]
2025-10-24 21:57:40,617 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:40,617 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:40,617 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 322.1, Distance: 10.0
2025-10-24 21:57:40,617 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:40,617 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:40,617 - __main__ - INFO - Binary mask: 55668 pixels above threshold 0.500
2025-10-24 21:57:40,623 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55668, contour_points=43
2025-10-24 21:57:40,624 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[129.5, 128.0], [130.0, 127.5]]
2025-10-24 21:57:40,624 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[259.0, 256.0], [260.0, 255.0]]
2025-10-24 21:57:40,624 - __main__ - WARNING - Prediction rejected: mask 6958.5x larger than reference (55668 vs 8)
2025-10-24 21:57:40,627 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:40] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:41,796 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=356.1, distance=16.0mm, contour_points=36, volume_slices=41
2025-10-24 21:57:41,797 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:41,797 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:41,798 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1748.0], mean: -911.1
2025-10-24 21:57:41,805 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:41,806 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:41,806 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:41,806 - __main__ - INFO - ðŸ“Š Using 41 real DICOM slices to build volume
2025-10-24 21:57:42,244 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.197]
2025-10-24 21:57:42,245 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:42,246 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:42,246 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 324.1, Distance: 8.0
2025-10-24 21:57:42,246 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.194]
2025-10-24 21:57:42,246 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:42,246 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:42,246 - __main__ - INFO - Binary mask: 55722 pixels above threshold 0.500
2025-10-24 21:57:42,271 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:42,271 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55722, contour_points=45
2025-10-24 21:57:42,271 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:42,271 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[50.5, 144.0], [51.0, 143.5]]
2025-10-24 21:57:42,271 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 330.1, Distance: 2.0
2025-10-24 21:57:42,271 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[101.0, 288.0], [102.0, 287.0]]
2025-10-24 21:57:42,271 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:42,271 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:42,271 - __main__ - INFO - Binary mask: 56120 pixels above threshold 0.500
2025-10-24 21:57:42,271 - __main__ - WARNING - Prediction rejected: mask 6965.2x larger than reference (55722 vs 8)
2025-10-24 21:57:42,283 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:42] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:42,283 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56120, contour_points=45
2025-10-24 21:57:42,283 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[49.5, 145.0], [50.0, 144.5]]
2025-10-24 21:57:42,283 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[99.0, 290.0], [100.0, 289.0]]
2025-10-24 21:57:42,283 - __main__ - WARNING - Prediction rejected: mask 7015.0x larger than reference (56120 vs 8)
2025-10-24 21:57:42,288 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:42] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:42,294 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.172, 0.195]
2025-10-24 21:57:42,294 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:42,294 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:42,294 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 328.1, Distance: 4.0
2025-10-24 21:57:42,294 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:42,295 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:42,295 - __main__ - INFO - Binary mask: 55907 pixels above threshold 0.500
2025-10-24 21:57:42,300 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55907, contour_points=43
2025-10-24 21:57:42,300 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[34.5, 144.0], [34.5, 143.0]]
2025-10-24 21:57:42,300 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[69.0, 288.0], [69.0, 286.0]]
2025-10-24 21:57:42,300 - __main__ - WARNING - Prediction rejected: mask 6988.4x larger than reference (55907 vs 8)
2025-10-24 21:57:42,303 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:42] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:42,312 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.171, 0.196]
2025-10-24 21:57:42,313 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:42,313 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:42,313 - __main__ - INFO - ðŸ“Š Reference position: 332.1, Target position: 326.1, Distance: 6.0
2025-10-24 21:57:42,313 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:57:42,313 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:57:42,313 - __main__ - INFO - Binary mask: 55674 pixels above threshold 0.500
2025-10-24 21:57:42,317 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=55674, contour_points=43
2025-10-24 21:57:42,317 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 43, sample: [[66.5, 160.0], [66.5, 159.0]]
2025-10-24 21:57:42,317 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 43 points, sample: [[133.0, 320.0], [133.0, 318.0]]
2025-10-24 21:57:42,317 - __main__ - WARNING - Prediction rejected: mask 6959.2x larger than reference (55674 vs 8)
2025-10-24 21:57:42,320 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:42] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:43,471 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:57:43,472 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:43,472 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:43,473 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:57:43,479 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:43,479 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:43,479 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:43,479 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:57:44,695 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=372.1, distance=32.0mm, contour_points=36, volume_slices=81
2025-10-24 21:57:44,695 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:44,696 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:44,696 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1900.0], mean: -898.9
2025-10-24 21:57:45,696 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:57:45,696 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:45,697 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:45,698 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:57:45,701 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:45,702 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:45,702 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:45,702 - __main__ - INFO - ðŸ“Š Using 81 real DICOM slices to build volume
2025-10-24 21:57:45,709 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:45,710 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:45,710 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:45,710 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:57:46,736 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:57:46,736 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:46,737 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:46,738 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:57:47,765 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:57:47,766 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:47,766 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:47,767 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:57:47,768 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:47,768 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:47,768 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:47,768 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:57:47,773 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:47,774 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:47,774 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:47,774 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:57:55,368 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 11, target at 19
2025-10-24 21:57:55,368 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:55,369 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 11/32, mask has 18 pixels
2025-10-24 21:57:55,369 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[11,11]
2025-10-24 21:57:55,369 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:57:55,975 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.207]
2025-10-24 21:57:55,976 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:55,976 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:55,976 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 356.1, Distance: 16.0
2025-10-24 21:57:55,976 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:57:55,976 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:57:55,976 - __main__ - INFO - Binary mask: 45941 pixels above threshold 0.500
2025-10-24 21:57:56,520 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=45941, contour_points=352
2025-10-24 21:57:56,520 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 352, sample: [[255.0, 201.5], [254.0, 201.5]]
2025-10-24 21:57:56,520 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 352 points, sample: [[510.0, 403.0], [508.0, 403.0]]
2025-10-24 21:57:56,520 - __main__ - WARNING - Prediction rejected: mask 2552.3x larger than reference (45941 vs 18)
2025-10-24 21:57:56,595 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:56] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:56,912 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:57:56,912 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:56,913 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:57:56,913 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:57:56,913 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:57:58,099 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:57:58,099 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:57:58,100 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:57:58,101 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:57:58,107 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:57:58,108 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:57:58,108 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:57:58,108 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:57:58,426 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:57:58,426 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:58,426 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:57:58,427 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:57:58,427 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:57:58,439 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 23
2025-10-24 21:57:58,439 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:58,439 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:57:58,441 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:57:58,441 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:57:58,845 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:57:58,846 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:57:58,846 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:57:58,846 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:57:58,846 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:57:58,846 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:57:58,847 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:57:58,888 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:57:58,888 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:57:58,888 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:57:58,888 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:57:58,980 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:57:58] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:57:59,116 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:57:59,116 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:59,116 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:57:59,117 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:57:59,117 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:57:59,118 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:57:59,118 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:57:59,118 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:57:59,119 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:57:59,119 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:00,445 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:58:00,447 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:00,448 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:00,449 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:58:00,458 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:00,458 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:00,458 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:00,458 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:58:00,656 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:00,657 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:00,657 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:00,657 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:00,657 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:00,657 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:00,657 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:00,712 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:00,712 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:00,712 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:00,717 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:00,815 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:00] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:00,823 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:00,824 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:00,824 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:00,824 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 372.1, Distance: 32.0
2025-10-24 21:58:00,824 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:00,824 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:00,824 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:58:00,831 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:58:00,832 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:00,832 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:00,832 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:58:00,936 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:00] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:01,285 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:01,286 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:01,286 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:01,286 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:01,286 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:01,287 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:01,287 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:01,293 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:01,293 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:01,293 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:01,293 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:01,403 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:01] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:01,406 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:01,407 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:01,407 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:01,407 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:01,407 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:01,407 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:01,408 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:01,413 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:01,414 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:01,414 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:01,414 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:01,507 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:01] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:01,842 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=366.1, target_pos=370.1, distance=4.0mm, contour_points=22
2025-10-24 21:58:01,843 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:01,843 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1811.0], mean: -900.3
2025-10-24 21:58:01,844 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:58:01,854 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:01,854 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 22
2025-10-24 21:58:01,854 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:01,854 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:58:01,859 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:01,859 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:58:01,859 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[142,145], y=[124,126], z=[0,27]
2025-10-24 21:58:01,859 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:58:03,237 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:58:03,819 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:04,196 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:58:04,196 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:04,196 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:04,196 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:04,197 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:58:04,197 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:58:04,207 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:04,207 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:04,207 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:04,207 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:58:04,208 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:04,208 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:04,208 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:04,208 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:58:05,224 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:58:05,224 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:05,224 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:05,225 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:58:05,234 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:05,234 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:05,234 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:05,234 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:58:05,299 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.154, 0.195]
2025-10-24 21:58:05,299 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:05,299 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:05,299 - __main__ - INFO - ðŸ“Š Reference position: 366.1, Target position: 370.1, Distance: 4.0
2025-10-24 21:58:05,299 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:58:05,299 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:58:05,300 - __main__ - INFO - Binary mask: 56909 pixels above threshold 0.500
2025-10-24 21:58:05,470 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56909, contour_points=45
2025-10-24 21:58:05,470 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[129.5, 112.0], [130.0, 111.5]]
2025-10-24 21:58:05,470 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[259.0, 224.0], [260.0, 223.0]]
2025-10-24 21:58:05,471 - __main__ - WARNING - Prediction rejected: mask 7113.6x larger than reference (56909 vs 8)
2025-10-24 21:58:05,473 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:05] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:06,913 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:58:06,914 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:06,914 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:06,915 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:58:06,921 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:06,922 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:06,922 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:06,922 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:58:12,159 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:58:12,160 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:12,160 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:12,160 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:12,160 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:12,915 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:12,916 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:12,916 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:12,916 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:58:12,916 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:12,916 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:12,917 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:13,755 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:13,755 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:13,755 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:13,755 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:13,853 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:13] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:15,432 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:58:15,433 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:15,434 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:15,434 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:58:15,441 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:58:15,442 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:15,442 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:15,444 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:15,444 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:15,451 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:15,451 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:15,451 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:15,451 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:58:16,647 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=372.1, distance=32.0mm, contour_points=36, volume_slices=81
2025-10-24 21:58:16,647 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:16,648 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:16,649 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1900.0], mean: -898.9
2025-10-24 21:58:16,656 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:16,657 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:16,657 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:16,657 - __main__ - INFO - ðŸ“Š Using 81 real DICOM slices to build volume
2025-10-24 21:58:17,535 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:17,536 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:17,536 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:17,536 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:58:17,536 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:17,536 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:17,536 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:17,670 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:17,670 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:17,670 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:17,670 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:17,847 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:17] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:18,464 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:58:18,464 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:58:18,464 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:18,465 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:18,465 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:18,465 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:18,466 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:18,466 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:18,467 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:18,467 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:18,828 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:58:18,828 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:18,828 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:18,829 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:18,829 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:19,442 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:19,443 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:19,443 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:19,443 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:19,443 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:19,443 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:19,443 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:19,449 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:19,449 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:19,449 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:19,450 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:19,582 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:19] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:19,597 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:19,599 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:19,599 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:19,599 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:58:19,599 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:19,599 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:19,599 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:19,605 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:19,605 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:19,605 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:19,606 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:19,748 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:19] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:19,916 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:58:19,916 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:19,917 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:19,918 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:19,918 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:20,018 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:20,019 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:20,019 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:20,019 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:20,019 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:20,019 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:20,019 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:20,025 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:20,025 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:20,025 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:20,025 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:20,169 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:20] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:21,451 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:58:21,453 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:21,454 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:21,455 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:58:21,488 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=366.1, target_pos=378.1, distance=12.0mm, contour_points=22
2025-10-24 21:58:21,488 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:21,489 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1811.0], mean: -900.3
2025-10-24 21:58:21,490 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1848.0], mean: -900.4
2025-10-24 21:58:21,495 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:21,495 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:21,495 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:21,496 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:58:21,502 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:21,502 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 22
2025-10-24 21:58:21,502 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:21,502 - __main__ - INFO - ðŸ“Š Using synthetic interpolation (no real slices available)
2025-10-24 21:58:21,514 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:21,514 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 0/32, mask has 8 pixels
2025-10-24 21:58:21,515 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[142,145], y=[124,126], z=[0,27]
2025-10-24 21:58:21,515 - __main__ - INFO - ðŸ“Š Box size: 3x2x27 pixels (2D: 3x2)
2025-10-24 21:58:22,755 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=376.1, distance=36.0mm, contour_points=36, volume_slices=91
2025-10-24 21:58:22,755 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:22,755 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:22,756 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1853.0], mean: -899.3
2025-10-24 21:58:22,763 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:22,763 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:22,763 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:22,763 - __main__ - INFO - ðŸ“Š Using 91 real DICOM slices to build volume
2025-10-24 21:58:23,235 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:23,236 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:23,236 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:23,236 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:23,236 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:23,236 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:23,236 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:23,333 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:23,333 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:23,333 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:23,333 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:23,465 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:23] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:23,741 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.154, 0.196]
2025-10-24 21:58:23,741 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:23,741 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:23,741 - __main__ - INFO - ðŸ“Š Reference position: 366.1, Target position: 378.1, Distance: 12.0
2025-10-24 21:58:23,741 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.538
2025-10-24 21:58:23,742 - __main__ - INFO - Using fixed threshold 0.500 (max=0.538)
2025-10-24 21:58:23,742 - __main__ - INFO - Binary mask: 56970 pixels above threshold 0.500
2025-10-24 21:58:23,745 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=56970, contour_points=45
2025-10-24 21:58:23,745 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 45, sample: [[130.5, 112.0], [130.5, 111.0]]
2025-10-24 21:58:23,745 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 45 points, sample: [[261.0, 224.0], [261.0, 222.0]]
2025-10-24 21:58:23,745 - __main__ - WARNING - Prediction rejected: mask 7121.2x larger than reference (56970 vs 8)
2025-10-24 21:58:23,748 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:23] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:25,446 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=378.1, distance=38.0mm, contour_points=36, volume_slices=96
2025-10-24 21:58:25,447 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:25,447 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:25,448 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1848.0], mean: -900.4
2025-10-24 21:58:25,458 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:25,458 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:25,458 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:25,458 - __main__ - INFO - ðŸ“Š Using 96 real DICOM slices to build volume
2025-10-24 21:58:26,984 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=378.1, distance=38.0mm, contour_points=36, volume_slices=96
2025-10-24 21:58:26,985 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:26,986 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:26,986 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1848.0], mean: -900.4
2025-10-24 21:58:26,994 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:26,994 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:26,994 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:26,994 - __main__ - INFO - ðŸ“Š Using 96 real DICOM slices to build volume
2025-10-24 21:58:31,011 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:58:31,011 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:31,012 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:58:31,012 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:58:31,012 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:31,343 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 23
2025-10-24 21:58:31,343 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:31,343 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:58:31,344 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:58:31,344 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:32,001 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:58:32,003 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:32,003 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:32,003 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:58:32,003 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:32,003 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:32,003 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:58:32,131 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:58:32,131 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:58:32,131 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:58:32,131 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:58:32,333 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:32] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:32,633 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:32,634 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:32,634 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:32,634 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 372.1, Distance: 32.0
2025-10-24 21:58:32,634 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:32,634 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:32,634 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:58:32,641 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:58:32,642 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:32,642 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:32,642 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:58:32,774 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:32] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:34,395 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=378.1, distance=38.0mm, contour_points=36, volume_slices=96
2025-10-24 21:58:34,395 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:58:34,395 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:58:34,396 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1848.0], mean: -900.4
2025-10-24 21:58:34,402 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:58:34,402 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:58:34,402 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:58:34,402 - __main__ - INFO - ðŸ“Š Using 96 real DICOM slices to build volume
2025-10-24 21:58:36,240 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 21:58:36,241 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:36,241 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:58:36,242 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:58:36,242 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:36,584 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 6, target at 24
2025-10-24 21:58:36,584 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:36,584 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 6/32, mask has 18 pixels
2025-10-24 21:58:36,584 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[6,6]
2025-10-24 21:58:36,584 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:37,004 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:37,005 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:37,005 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:37,005 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 21:58:37,005 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:37,005 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:37,005 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:58:37,057 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:58:37,057 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:37,057 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:37,057 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:58:37,228 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:37] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:37,528 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:37,528 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:37,528 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:37,528 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 376.1, Distance: 36.0
2025-10-24 21:58:37,528 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:37,528 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:37,528 - __main__ - INFO - Binary mask: 43940 pixels above threshold 0.500
2025-10-24 21:58:37,534 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=43940, contour_points=417
2025-10-24 21:58:37,534 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 417, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:37,534 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 417 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:37,534 - __main__ - WARNING - Prediction rejected: mask 2441.1x larger than reference (43940 vs 18)
2025-10-24 21:58:37,678 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:37] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:38,294 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 6, target at 25
2025-10-24 21:58:38,294 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:38,294 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 6/32, mask has 18 pixels
2025-10-24 21:58:38,295 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[6,6]
2025-10-24 21:58:38,295 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:38,704 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 6, target at 25
2025-10-24 21:58:38,704 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:38,704 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 6/32, mask has 18 pixels
2025-10-24 21:58:38,705 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[6,6]
2025-10-24 21:58:38,705 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:39,214 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:39,215 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:39,215 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:39,215 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 378.1, Distance: 38.0
2025-10-24 21:58:39,215 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:39,215 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:39,215 - __main__ - INFO - Binary mask: 43940 pixels above threshold 0.500
2025-10-24 21:58:39,221 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=43940, contour_points=417
2025-10-24 21:58:39,221 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 417, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:39,221 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 417 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:39,221 - __main__ - WARNING - Prediction rejected: mask 2441.1x larger than reference (43940 vs 18)
2025-10-24 21:58:39,347 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:39] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:39,641 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:39,641 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:39,642 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:39,642 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 378.1, Distance: 38.0
2025-10-24 21:58:39,642 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:39,642 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:39,642 - __main__ - INFO - Binary mask: 43940 pixels above threshold 0.500
2025-10-24 21:58:39,743 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=43940, contour_points=417
2025-10-24 21:58:39,743 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 417, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:39,743 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 417 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:39,743 - __main__ - WARNING - Prediction rejected: mask 2441.1x larger than reference (43940 vs 18)
2025-10-24 21:58:39,850 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:39] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:44,704 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 6, target at 25
2025-10-24 21:58:44,704 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:58:44,704 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 6/32, mask has 18 pixels
2025-10-24 21:58:44,705 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[6,6]
2025-10-24 21:58:44,705 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:58:45,228 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:58:45,228 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:58:45,228 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:58:45,229 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 378.1, Distance: 38.0
2025-10-24 21:58:45,229 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:58:45,229 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:58:45,229 - __main__ - INFO - Binary mask: 43940 pixels above threshold 0.500
2025-10-24 21:58:45,234 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=43940, contour_points=417
2025-10-24 21:58:45,234 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 417, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:58:45,234 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 417 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:58:45,234 - __main__ - WARNING - Prediction rejected: mask 2441.1x larger than reference (43940 vs 18)
2025-10-24 21:58:45,338 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:45] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:58:48,724 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:58:48] "GET /health HTTP/1.1" 200 -
2025-10-24 21:59:01,002 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:01] "GET /health HTTP/1.1" 200 -
2025-10-24 21:59:04,572 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=356.1, distance=16.0mm, contour_points=36, volume_slices=41
2025-10-24 21:59:04,572 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:04,572 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:04,573 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1748.0], mean: -911.1
2025-10-24 21:59:04,579 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:04,579 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:04,579 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:04,579 - __main__ - INFO - ðŸ“Š Using 41 real DICOM slices to build volume
2025-10-24 21:59:06,184 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=346.1, target_pos=368.1, distance=22.0mm, contour_points=34, volume_slices=56
2025-10-24 21:59:06,184 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:06,185 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1639.0], mean: -912.0
2025-10-24 21:59:06,185 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:59:06,193 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:06,194 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 34
2025-10-24 21:59:06,194 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:06,194 - __main__ - INFO - ðŸ“Š Using 56 real DICOM slices to build volume
2025-10-24 21:59:07,241 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:59:07,241 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:07,242 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:07,242 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:59:07,248 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:07,249 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:07,249 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:07,249 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:59:08,629 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:59:08,629 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:08,630 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:08,630 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:59:09,719 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:59:09,719 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:09,720 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:09,720 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:09,720 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:09,721 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:59:09,721 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:09,721 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:59:10,882 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=372.1, distance=32.0mm, contour_points=36, volume_slices=81
2025-10-24 21:59:10,882 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:10,884 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:10,885 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1900.0], mean: -898.9
2025-10-24 21:59:10,890 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:10,891 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:10,891 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:10,891 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:59:10,901 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:10,901 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:10,901 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:10,901 - __main__ - INFO - ðŸ“Š Using 81 real DICOM slices to build volume
2025-10-24 21:59:18,561 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 11, target at 19
2025-10-24 21:59:18,562 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:18,562 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 11/32, mask has 18 pixels
2025-10-24 21:59:18,564 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[11,11]
2025-10-24 21:59:18,564 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:19,329 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.207]
2025-10-24 21:59:19,330 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:19,330 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:19,330 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 356.1, Distance: 16.0
2025-10-24 21:59:19,330 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:19,330 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:19,331 - __main__ - INFO - Binary mask: 45941 pixels above threshold 0.500
2025-10-24 21:59:20,052 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=45941, contour_points=352
2025-10-24 21:59:20,052 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 352, sample: [[255.0, 201.5], [254.0, 201.5]]
2025-10-24 21:59:20,052 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 352 points, sample: [[510.0, 403.0], [508.0, 403.0]]
2025-10-24 21:59:20,062 - __main__ - WARNING - Prediction rejected: mask 2552.3x larger than reference (45941 vs 18)
2025-10-24 21:59:20,206 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:20] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:20,206 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 10, target at 21
2025-10-24 21:59:20,206 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:20,207 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 10/32, mask has 17 pixels
2025-10-24 21:59:20,208 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[140,144], y=[121,125], z=[10,10]
2025-10-24 21:59:20,208 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:20,559 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:59:20,560 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:20,560 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:59:20,562 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:59:20,562 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:22,401 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:59:22,402 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:22,404 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:22,405 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:59:22,416 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:22,416 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:22,416 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:22,416 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:59:22,878 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.191, 0.208]
2025-10-24 21:59:22,881 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:22,881 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:22,881 - __main__ - INFO - ðŸ“Š Reference position: 346.1, Target position: 368.1, Distance: 22.0
2025-10-24 21:59:22,881 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:22,881 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:22,881 - __main__ - INFO - Binary mask: 45138 pixels above threshold 0.500
2025-10-24 21:59:22,936 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=45138, contour_points=352
2025-10-24 21:59:22,936 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 352, sample: [[255.0, 201.5], [254.0, 201.5]]
2025-10-24 21:59:22,936 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 352 points, sample: [[510.0, 403.0], [508.0, 403.0]]
2025-10-24 21:59:22,936 - __main__ - WARNING - Prediction rejected: mask 2655.2x larger than reference (45138 vs 17)
2025-10-24 21:59:23,049 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:23] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:23,281 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:59:23,281 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:23,282 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:59:23,282 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:59:23,282 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:23,378 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:59:23,379 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:23,379 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:23,379 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:59:23,379 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:23,379 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:23,379 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:59:23,387 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:59:23,387 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:59:23,387 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:59:23,387 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:59:23,602 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:23] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:23,699 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:59:23,699 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:23,699 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:59:23,701 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:59:23,701 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:23,707 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 23
2025-10-24 21:59:23,707 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:23,707 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:59:23,708 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:59:23,708 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:24,978 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=368.1, distance=28.0mm, contour_points=36, volume_slices=71
2025-10-24 21:59:24,978 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:24,979 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:24,980 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1824.0], mean: -898.8
2025-10-24 21:59:24,991 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:24,992 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:24,992 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:24,992 - __main__ - INFO - ðŸ“Š Using 71 real DICOM slices to build volume
2025-10-24 21:59:26,167 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=370.1, distance=30.0mm, contour_points=36, volume_slices=76
2025-10-24 21:59:26,168 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:26,169 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:26,170 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1844.0], mean: -898.7
2025-10-24 21:59:26,183 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:26,183 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:26,183 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:26,183 - __main__ - INFO - ðŸ“Š Using 76 real DICOM slices to build volume
2025-10-24 21:59:27,092 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:59:27,095 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:27,095 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:27,095 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:59:27,095 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:27,095 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:27,095 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:59:27,356 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:59:27,356 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:59:27,357 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:59:27,357 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:59:27,608 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:27] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:27,778 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:59:27,779 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:27,779 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:27,780 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:59:27,780 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:27,780 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:27,780 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:59:27,788 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:59:27,788 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:59:27,788 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:59:27,788 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:59:28,097 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:28] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:28,145 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:59:28,145 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:28,145 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:28,145 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 372.1, Distance: 32.0
2025-10-24 21:59:28,145 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:28,146 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:28,146 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:59:28,152 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:59:28,152 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:59:28,152 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:59:28,152 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:59:28,458 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:28] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:29,976 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=372.1, distance=32.0mm, contour_points=36, volume_slices=81
2025-10-24 21:59:29,976 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:29,977 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:29,978 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1900.0], mean: -898.9
2025-10-24 21:59:29,988 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:29,989 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:29,989 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:29,989 - __main__ - INFO - ðŸ“Š Using 81 real DICOM slices to build volume
2025-10-24 21:59:31,236 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:59:31,237 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:31,237 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:31,238 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:59:32,605 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:59:32,605 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:32,606 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:32,607 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:59:32,612 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:32,613 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:32,613 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:32,613 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:59:32,617 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:32,617 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:32,617 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:32,617 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:59:39,567 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:59:39,568 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:39,569 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:39,569 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:59:39,576 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:39,576 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:39,576 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:39,576 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:59:40,193 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:59:40,194 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:40,194 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:59:40,195 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:59:40,196 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:41,606 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:59:41,607 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:41,607 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:41,607 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:59:41,608 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:41,608 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:41,608 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:59:42,259 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:59:42,259 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:59:42,259 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:59:42,259 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:59:42,484 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:42] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:42,487 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 22
2025-10-24 21:59:42,487 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:42,488 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:59:42,488 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:59:42,488 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:43,107 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:59:43,108 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:43,108 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:43,108 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 368.1, Distance: 28.0
2025-10-24 21:59:43,108 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:43,108 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:43,108 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:59:43,115 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:59:43,115 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:59:43,115 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:59:43,115 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:59:43,355 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:43] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:43,753 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 8, target at 23
2025-10-24 21:59:43,753 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:43,753 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 8/32, mask has 18 pixels
2025-10-24 21:59:43,754 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[8,8]
2025-10-24 21:59:43,754 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:45,540 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:59:45,540 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:45,541 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:45,542 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:59:45,552 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:45,552 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:45,552 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:45,552 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:59:45,774 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.190, 0.210]
2025-10-24 21:59:45,775 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:45,775 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:45,775 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 370.1, Distance: 30.0
2025-10-24 21:59:45,775 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:45,775 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:45,775 - __main__ - INFO - Binary mask: 44876 pixels above threshold 0.500
2025-10-24 21:59:45,823 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44876, contour_points=686
2025-10-24 21:59:45,823 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 686, sample: [[0.0, 48.5], [1.0, 48.5]]
2025-10-24 21:59:45,823 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 686 points, sample: [[0.0, 97.0], [2.0, 97.0]]
2025-10-24 21:59:45,823 - __main__ - WARNING - Prediction rejected: mask 2493.1x larger than reference (44876 vs 18)
2025-10-24 21:59:46,033 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:46] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:47,886 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:59:47,886 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:47,886 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:47,887 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:59:47,890 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 23
2025-10-24 21:59:47,890 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:47,891 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:59:47,891 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:59:47,891 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:47,894 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:47,895 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:47,895 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:47,895 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:59:48,242 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 21:59:48,242 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:48,242 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:59:48,243 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:59:48,243 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:48,251 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 21:59:48,251 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:48,251 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:59:48,252 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:59:48,252 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:49,565 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:59:49,567 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:49,567 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:49,567 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 372.1, Distance: 32.0
2025-10-24 21:59:49,567 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:49,567 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:49,567 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:59:49,725 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:59:49,726 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:59:49,726 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:59:49,726 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:59:49,977 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:49] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:51,386 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=374.1, distance=34.0mm, contour_points=36, volume_slices=86
2025-10-24 21:59:51,386 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 21:59:51,387 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 21:59:51,388 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1910.0], mean: -899.1
2025-10-24 21:59:51,395 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 21:59:51,395 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 21:59:51,395 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 21:59:51,395 - __main__ - INFO - ðŸ“Š Using 86 real DICOM slices to build volume
2025-10-24 21:59:51,638 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:59:51,639 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:51,639 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:51,639 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 21:59:51,639 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:51,639 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:51,639 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:59:52,156 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:59:52,157 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:59:52,157 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:59:52,158 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:59:52,284 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:52] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:52,291 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:59:52,292 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:52,292 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:52,292 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 21:59:52,292 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:52,292 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:52,292 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:59:52,298 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:59:52,298 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:59:52,298 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:59:52,298 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:59:52,410 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:52] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:56,431 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 21:59:56,432 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:56,432 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:59:56,432 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:59:56,432 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 21:59:57,071 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 21:59:57,072 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 21:59:57,072 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 21:59:57,072 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 21:59:57,072 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 21:59:57,072 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 21:59:57,072 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 21:59:57,079 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 21:59:57,079 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 21:59:57,079 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 21:59:57,080 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 21:59:57,229 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 21:59:57] "POST /predict HTTP/1.1" 200 -
2025-10-24 21:59:59,736 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 21:59:59,736 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 21:59:59,736 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 21:59:59,737 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 21:59:59,737 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 22:00:00,253 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 22:00:00,254 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 22:00:00,254 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 22:00:00,254 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 22:00:00,254 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 22:00:00,254 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 22:00:00,254 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 22:00:00,260 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 22:00:00,260 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 22:00:00,260 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 22:00:00,260 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 22:00:00,382 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 22:00:00] "POST /predict HTTP/1.1" 200 -
2025-10-24 22:00:00,984 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 22:00:00,984 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 22:00:00,985 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 22:00:00,985 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 22:00:00,985 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 22:00:01,504 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 22:00:01,504 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 22:00:01,505 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 22:00:01,505 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 22:00:01,505 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 22:00:01,505 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 22:00:01,505 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 22:00:01,510 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 22:00:01,510 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 22:00:01,510 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 22:00:01,510 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 22:00:01,618 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 22:00:01] "POST /predict HTTP/1.1" 200 -
2025-10-24 22:00:02,220 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 7, target at 24
2025-10-24 22:00:02,220 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 22:00:02,220 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 7/32, mask has 18 pixels
2025-10-24 22:00:02,221 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[7,7]
2025-10-24 22:00:02,221 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 22:00:02,740 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 22:00:02,741 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 22:00:02,741 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 22:00:02,741 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 374.1, Distance: 34.0
2025-10-24 22:00:02,741 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 22:00:02,741 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 22:00:02,741 - __main__ - INFO - Binary mask: 44282 pixels above threshold 0.500
2025-10-24 22:00:02,747 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=44282, contour_points=411
2025-10-24 22:00:02,747 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 411, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 22:00:02,747 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 411 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 22:00:02,747 - __main__ - WARNING - Prediction rejected: mask 2460.1x larger than reference (44282 vs 18)
2025-10-24 22:00:02,847 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 22:00:02] "POST /predict HTTP/1.1" 200 -
2025-10-24 22:00:56,798 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=376.1, distance=36.0mm, contour_points=36, volume_slices=91
2025-10-24 22:00:56,799 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 22:00:56,799 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 22:00:56,800 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1853.0], mean: -899.3
2025-10-24 22:00:56,808 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 22:00:56,808 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 22:00:56,808 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 22:00:56,808 - __main__ - INFO - ðŸ“Š Using 91 real DICOM slices to build volume
2025-10-24 22:00:58,117 - __main__ - INFO - ðŸŽ¯ PREDICTION REQUEST: ref_pos=340.1, target_pos=378.1, distance=38.0mm, contour_points=36, volume_slices=96
2025-10-24 22:00:58,117 - __main__ - INFO - ðŸ“Š Original image shape: (512, 512)
2025-10-24 22:00:58,117 - __main__ - INFO - ðŸ“Š Reference slice pixel range: [-1000.0, 1601.0], mean: -876.9
2025-10-24 22:00:58,117 - __main__ - INFO - ðŸ“Š Target slice pixel range: [-1000.0, 1848.0], mean: -900.4
2025-10-24 22:00:58,124 - __main__ - INFO - ðŸ“Š After normalization - Ref slice: [0.000, 1.000], Target: [0.000, 1.000]
2025-10-24 22:00:58,124 - __main__ - INFO - ðŸ“Š Reference mask shape (resized): (256, 256), contour points: 36
2025-10-24 22:00:58,124 - __main__ - INFO - ðŸ“Š Reference slice shape (resized): (256, 256)
2025-10-24 22:00:58,124 - __main__ - INFO - ðŸ“Š Using 96 real DICOM slices to build volume
2025-10-24 22:01:07,552 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 6, target at 24
2025-10-24 22:01:07,552 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 22:01:07,552 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 6/32, mask has 18 pixels
2025-10-24 22:01:07,553 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[6,6]
2025-10-24 22:01:07,553 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 22:01:07,873 - __main__ - INFO - ðŸ“Š Built real volume: ref at index 6, target at 25
2025-10-24 22:01:07,873 - __main__ - INFO - ðŸ“Š Volume tensor shape: torch.Size([1, 1, 32, 256, 256]) (target depth: 32)
2025-10-24 22:01:07,873 - __main__ - INFO - ðŸ“Š Extracting reference mask from index 6/32, mask has 18 pixels
2025-10-24 22:01:07,873 - __main__ - INFO - ðŸ“Š Bounding box prompt: x=[139,143], y=[121,125], z=[6,6]
2025-10-24 22:01:07,873 - __main__ - INFO - ðŸ“Š Box size: 4x4x0 pixels (2D: 4x4)
2025-10-24 22:01:08,208 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 22:01:08,208 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 22:01:08,208 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 22:01:08,208 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 376.1, Distance: 36.0
2025-10-24 22:01:08,208 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 22:01:08,208 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 22:01:08,209 - __main__ - INFO - Binary mask: 43940 pixels above threshold 0.500
2025-10-24 22:01:08,302 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=43940, contour_points=417
2025-10-24 22:01:08,302 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 417, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 22:01:08,302 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 417 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 22:01:08,302 - __main__ - WARNING - Prediction rejected: mask 2441.1x larger than reference (43940 vs 18)
2025-10-24 22:01:08,396 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 22:01:08] "POST /predict HTTP/1.1" 200 -
2025-10-24 22:01:08,699 - __main__ - INFO - ðŸ“Š Model logits: shape=torch.Size([1, 1, 32, 256, 256]), range=[-0.194, 0.211]
2025-10-24 22:01:08,700 - __main__ - INFO - ðŸ“Š Output shape: torch.Size([1, 1, 32, 256, 256])
2025-10-24 22:01:08,700 - __main__ - INFO - ðŸ“Š Extracting target slice at index -1 from volume of depth 32
2025-10-24 22:01:08,700 - __main__ - INFO - ðŸ“Š Reference position: 340.1, Target position: 378.1, Distance: 38.0
2025-10-24 22:01:08,700 - __main__ - INFO - ðŸ“Š Predicted mask shape: (256, 256), max value: 0.547
2025-10-24 22:01:08,700 - __main__ - INFO - Using fixed threshold 0.500 (max=0.547)
2025-10-24 22:01:08,700 - __main__ - INFO - Binary mask: 43940 pixels above threshold 0.500
2025-10-24 22:01:08,706 - __main__ - INFO - Mask to contour: threshold=0.500, mask_pixels=43940, contour_points=417
2025-10-24 22:01:08,706 - __main__ - INFO - ðŸ“Š Predicted contour points (256Ã—256): 417, sample: [[0.0, 194.5], [1.0, 194.5]]
2025-10-24 22:01:08,706 - __main__ - INFO - ðŸ“Š Predicted contour scaled to original: 417 points, sample: [[0.0, 389.0], [2.0, 389.0]]
2025-10-24 22:01:08,706 - __main__ - WARNING - Prediction rejected: mask 2441.1x larger than reference (43940 vs 18)
2025-10-24 22:01:08,813 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 22:01:08] "POST /predict HTTP/1.1" 200 -
2025-10-24 22:03:23,937 - werkzeug - INFO - 127.0.0.1 - - [24/Oct/2025 22:03:23] "GET /health HTTP/1.1" 200 -
